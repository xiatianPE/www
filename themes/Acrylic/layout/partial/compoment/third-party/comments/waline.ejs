<% const walineConfig = theme.comments.waline; %>

<% if (walineConfigï¼Œ.enable) { %>
  <div id="waline-comments"></div>

  <script>
    function loadWalineSuc(func) {
      func({
        el: '#waline-comments',
        path: location.pathname,
        serverURL: '<%- walineConfig.serverURL %>',
        emojiPath: false,
        dark: 'auto',
        reaction: false,
        pageSize: 10
      })
    }
  </script>

  <% if (theme.cdns && theme.cdns.comments.waline && theme.cdns.comments.waline.enable) { %>
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css">
    <script type="module">
      import { init } from 'https://unpkg.com/@waline/client@v2/dist/waline.mjs'
      loadWalineSuc(init)
    </script>
  <% } else { %>
    <link rel="stylesheet" href="/plugins/waline.css">
    <script type="module">
      import { init } from '/plugins/waline.mjs'
      loadWalineSuc(init)
    </script>
  <% } %>
<% } %>
